{{!-- 
  Carousel Template (fluentui-carousel web component)
  ====================================================
  Uses <fluentui-carousel> from @mrpullen/fluentui-carousel.
  Auto-plays with looping; prev/next controls and indicators are built in.

  Expected List Columns:
  - Title: Single line of text
  (Customize the slide markup below for your list schema.)

  SharePoint Theme Integration:
  Maps SP CSS custom properties to the carousel's own CSS variables.

  Available Data:
  - items: Primary list data from configured list/view
  - user: Current user profile information
  - wpId: Web part instance ID
--}}

<style>
  .carousel-wrapper-{{wpId}} {
    width: 100%;
    max-width: 960px;
  }

  .carousel-wrapper-{{wpId}} fluentui-carousel {
    --carousel-controls: var(--themePrimary, #0078d4);
    --carousel-controls-hover: var(--themeDarker, #004578);
    --carousel-controls-active: var(--themeDark, #005a9e);
    --carousel-controls-hover-background: var(--neutralLighterAlt, rgba(255, 255, 255, 0.4));
    --carousel-slide-transition: transform 0.5s ease;
    --carousel-indicator-width: 10px;
    --carousel-indicator-height: 10px;
    --carousel-indicator-margin: 0 3px;
    --carousel-indicator-border-radius: 50%;
    --carousel-indicator-opacity: 0.5;
    width: 100%;
    min-height: 200px;
  }

  .carousel-slide-{{wpId}} {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
    min-height: 200px;
  }

  .carousel-slide-{{wpId}} fluent-card {
    padding: 20px;
    width: 100%;
    max-width: 720px;
    background: var(--white, #ffffff);
    color: var(--bodyText, #323130);
    border: 1px solid var(--neutralLighter, #edebe9);
    border-left: 4px solid var(--themePrimary, #0078d4);
    border-radius: 2px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }

  .carousel-slide-title-{{wpId}} {
    font-size: 16px;
    font-weight: 600;
    color: var(--neutralPrimary, #323130);
    margin: 0 0 8px 0;
  }

  .carousel-slide-meta-{{wpId}} {
    font-size: 12px;
    color: var(--neutralSecondary, #605e5c);
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .carousel-empty-{{wpId}} {
    text-align: center;
    padding: 40px 20px;
    color: var(--neutralSecondary, #605e5c);
  }
</style>

<div class="carousel-wrapper-{{wpId}}">
  {{#if items.length}}
    <fluentui-carousel autoplay="true" autoplay-interval="5000" loop="true"
      aria-label="Item carousel">
      {{#each items}}
        <div class="carousel-slide-{{../wpId}}">
          <fluent-card>
            <h3 class="carousel-slide-title-{{../wpId}}">{{Title}}</h3>
            {{#if Author}}
            <div class="carousel-slide-meta-{{../wpId}}">
              <fluent-avatar name="{{Author.Title}}" size="20"></fluent-avatar>
              <span>{{Author.Title}}</span>
              {{#if Modified}}
                <span style="margin-left: auto;">{{Modified}}</span>
              {{/if}}
            </div>
            {{/if}}
          </fluent-card>
        </div>
      {{/each}}
    </fluentui-carousel>
  {{else}}
    <div class="carousel-empty-{{wpId}}">
      <div style="font-size: 48px; margin-bottom: 12px;">ðŸŽ </div>
      <fluent-text size="500" weight="semibold">No items to display</fluent-text>
      <p style="margin-top: 8px;">Configure a list in the web part settings.</p>
    </div>
  {{/if}}
</div>